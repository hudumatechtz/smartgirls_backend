<%- include("includes/admin-header") -%>
<!-- CONTENTS -->

<div id="services " class="services" style="overflow: hidden">
    <div class="container" data-aos="fade-up">
        <div class="d-flex row">
            <div class="mt-2 section-title col-6">
                <!-- <h2>Articles</h2> -->
                <p>Admins</p>
            </div>
            <div class="mt-2 text-right col-6" style="padding-left: 0; padding-right: 0">
                <a href="/register">
                    <button type="button" id="add-article-button" class="ui primary labeled icon button"
                        style="background: var(--main-color) !important; border: 1px solid var(--main-color) !important; margin-right: 0">
                        <i class="plus icon"></i>
                        Add Admin
                    </button>
                </a>
            </div>
        </div>


        <div class="about" data-aos="fade-up">
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Username</th>
                            <th>Delete</th>
                        </tr>

                    </thead>
                    <tbody class="align-middle">
                        <% admins.forEach((admin) => { %>
                        <tr>
                            <td><%= admin.username %></td>
                            <td><a href="/admins-admin/delete-admin/<%= admin._id %>" id="delete"><i
                                        class="fa fa-trash"></i></a></td>
                        </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<script>
    $(function () {
        $('a#delete').on('click', function (e) {
            var href = this.href;
            e.preventDefault();
            swal({
                    title: "Are you sure you want to delete this Admin?",
                    icon: "warning",
                    buttons: true,
                    dangerMode: true,
                })
                .then((willDelete) => {
                    if (willDelete) {
                        swal("Thank you!", "Admin Deleted Successfully", "success");
                        location.href = href;
                    } else {
                        swal("You did not delete this Admin!");
                    }
                });

        });
    });
</script>

<%- include("includes/admin-footer") -%>