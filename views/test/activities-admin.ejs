<%- include("../includes/admin-header") -%>
<!-- CONTENTS -->

<section id="services " class="services" style="overflow: hidden">
  <div class="container" data-aos="fade-up">
    <div class="d-flex row">
      <div class="mt-2 section-title col-6">
        <!-- <h2>Articles</h2> -->
        <p>Trainers</p>
      </div>
      <div class="mt-2 text-right col-6" style="padding-left: 0; padding-right: 0">
        <a href="/activities-admin/add-activity">
          <button type="button" id="add-article-button" class="ui primary labeled icon button" style="background: var(--main-color) !important; border: 1px solid var(--main-color) !important; margin-right: 0">
            <i class="plus icon"></i>
            Add Activity Year
          </button>
        </a>
      </div>
    </div>


        <div class="about" data-aos="fade-up">
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead class="thead-light">
                        <tr>
                            <th>Year</th>
                            <th>Phase No</th>
                            <th>Phase theme</th>
                            <th>Phase description</th>
                            <th>Edit</th>
                            <th>Delete</th>
                        </tr>

          </thead>
          <tbody class="align-middle">
            <% activities.forEach((activity) => { %>
            <tr>
              <td><%= activity.year %> <a href="/phases-admin/<%= activity._id %>/add-phase" id="edit">Add Phase</a></td>
              <% activity.phases.forEach(function(phase) { %>
              <td><%= phase.phaseNumber %></td>
              <td><%= phase.theme %></td>
              <td><%= phase.description %></td>

              <td><a href="/phases-admin/<%= activity._id %>/edit-phase/<%= phase._id %>" id="edit">Edit</a></td>
              <td><a href="/phases-admin/delete-phase/<%= phase._id %>" id="delete"><i class="fa fa-trash"></i></a></td>
              <%}); %>
            </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>


<script>
  $(function() {
    $('a#delete').on('click', function(e) {
      var href = this.href;
      e.preventDefault();
      swal({
          title: "Are you sure you want to delete this trainer?",
          icon: "warning",
          buttons: true,
          dangerMode: true,
        })
        .then((willDelete) => {
          if (willDelete) {
            swal("Thank you!", "Trainer Deleted Successfully", "success");
            location.href = href;
          } else {
            swal("You did not delete this trainer!");
          }
        });

    });
  });
</script>

<%- include("../includes/admin-footer") -%>